(this.webpackJsonpstx_first_stage=this.webpackJsonpstx_first_stage||[]).push([[0],{40:function(e,t,a){e.exports=a(74)},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(38),l=a.n(i),s=(a(45),a(46),a(47),a(48),a(2)),c=a(12),o=a(13),u=a(18),m=a(19),f=a(14),d=a.n(f),h=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("h1",null,"Micha\u0142 Raszczuk 2020"))},v=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).handleClick=function(){n.props.history.push("/search")},n.titleRef=r.a.createRef(),n.headerRef=r.a.createRef(),n.bookRef=r.a.createRef(),n.rootRef=r.a.createRef(),n.state={readingPros:[{id:1,value:"1. Redukuje stres"},{id:2,value:"2. Poprawia pami\u0119\u0107"},{id:3,value:"3. Inspiruje"},{id:4,value:"4. Rozwija wyobra\u017ani\u0119"},{id:5,value:"5. Poprawia skupienie i koncentracj\u0119"},{id:6,value:"6. Poszerza s\u0142ownictwo"},{id:7,value:"7. Zwi\u0119ksza atrakcyjno\u015b\u0107 dla p\u0142ci przeciwnej"},{id:8,value:"8. Stymuluje m\xf3zg"},{id:9,value:"9. Poszerza \u015bwiatopogl\u0105d"},{id:10,value:"10. Rozwija wra\u017cliwo\u015b\u0107 na innych ludzi"},{id:11,value:"11. Poszerza wiedz\u0119"},{id:12,value:"12. Zwi\u0119ksza zdolno\u015bci analityczne"},{id:13,value:"13. Poprawia pisanie"},{id:14,value:"14. Pomaga zasn\u0105\u0107"},{id:15,value:"15. Kszta\u0142tuje osobowo\u015b\u0107"}]},n.refsForAllElements=n.state.readingPros.reduce((function(e,t){return e[t.id]={id:t.id,ref:r.a.createRef(),ratio:0},e}),{});return n.observer=new IntersectionObserver((function(e){e.forEach((function(e){n.refsForAllElements[e.target.id].ratio=e.intersectionRatio,n.refsForAllElements[e.target.id].ratio>0&&n.refsForAllElements[e.target.id].ref.current.classList.add("pro-visible")}))}),{root:n.rootRef.current}),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.values(this.refsForAllElements).forEach((function(t){return e.observer.observe(t.ref.current)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:this.rootRef},r.a.createElement("div",{className:"main-header",ref:this.headerRef},r.a.createElement("h1",{ref:this.titleRef},"My Liblary")),r.a.createElement("div",{className:"landing-theme"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClick},"Wyszukaj ksi\u0105k\u0119!")),r.a.createElement("div",{className:"reading-information"},r.a.createElement("i",{className:"fas fa-book fa-7x"}),r.a.createElement("h1",null,"Czytanie:"),this.state.readingPros.map((function(t){return r.a.createElement("p",{className:"pro-invisible",key:t.id,id:t.id,ref:e.refsForAllElements[t.id].ref},t.value)}))),r.a.createElement(h,null))}}]),a}(r.a.Component),p=a(26),b=a(9),E={"Wybierz J\u0119zyk":"",Polski:"pl",Angielski:"en","W\u0142oski":"it","Hiszpa\u0144ski":"es",Portugalski:"pt",Niemiecki:"de",Rosyjski:"ru",Francuski:"fr","Fi\u0144ski":"fi",Szwedzki:"sv","S\u0142owacki":"sl",Norweski:"no"},k=function(e){if(e||e.volumeInfo){var t=e.volumeInfo,a=e.saleInfo;return{title:t.title,subtitle:t.subtitle,authors:t.authors,smallThumbnail:t.imageLinks&&t.imageLinks.smallThumbnail,language:t.language,description:t.description,publishedDate:t.publishedDate,price:a&&a.listPrice&&a.retailPrice.amount,currency:a&&a.listPrice&&a.retailPrice.currencyCode,buyLink:a&&a.buyLink,isForSale:a&&"NOT_FOR_SALE"!==a.saleability,isFree:a&&"FREE"===a.saleability}}},g=a(23),y=a.n(g),j=function(e){var t=e.title,a=e.authors,n=e.smallThumbnail,i=e.description,l=e.publishedDate,s=e.price,c=e.currency,o=e.isForSale,u=e.isFree,m=e.Ref;return r.a.createElement("div",{className:"volume-container",ref:m},r.a.createElement("div",{className:"img-container"},n?r.a.createElement("img",{src:n,alt:""}):r.a.createElement("img",{src:"book.png",alt:""})),r.a.createElement("div",{className:"additional-info-container"},r.a.createElement("h2",null,r.a.createElement(y.a,{text:t,maxLine:"2",ellipsis:"...",trimRight:!0,basedOn:"letters"})),r.a.createElement("h4",{className:"h4-description"},r.a.createElement(y.a,{text:i||"Brak Opisu",maxLine:"2",ellipsis:"...",trimRight:!0,basedOn:"letters"})),r.a.createElement("h4",{id:"autors"},a&&1===a.length?"Autor: ":"Autorzy: ",a&&a.map((function(e){return e}))),r.a.createElement("h4",null,l&&"Data wydania: "+l),r.a.createElement("div",{className:"price"},o?u?r.a.createElement("h2",{id:"free"},"Darmowe"):r.a.createElement("h2",{id:"for-sale"},"Cena: ",s," ",c):r.a.createElement("p",{id:"not-for-sale"},"Nie na sprzeda\u017c"))))},w=a(8),O=function(e){var t=e.className,a=e.name,n=e.placeholder,i=e.value,l=e.onChange;return r.a.createElement("div",{className:"text-container"},r.a.createElement("input",{className:t,name:a,type:"text",placeholder:n,value:i,onChange:function(e){l(e)}}))},R=a(76),N=a(77),z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.setState({q:n.state.q,langRestrict:n.state.langRestrict}),n.props.handleSubmit(n.state.filters)},n.formRef=r.a.createRef(),n.state={filters:{q:"",authors:"",langRestrict:"",filter:""},areFiltersActive:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=window.innerWidth<=576,a=t?"flex":"none";return r.a.createElement("div",{className:"form-main-container"},r.a.createElement("div",{className:"search-title-container"},r.a.createElement("div",{className:"search-title-icon",onClick:function(){return e.props.history.goBack()}},r.a.createElement("i",{className:"fas fa-arrow-left fa-2x hover-icon"})),r.a.createElement("div",{className:"search-title"},r.a.createElement("h1",null,"My Liblary"),r.a.createElement("h3",null,"Wyszukaj")),r.a.createElement("div",{className:"search-title-icon hover-icon",onClick:function(){return e.setState({areFiltersActive:!0})}},r.a.createElement("i",{className:"fas fa-filter fa-2x hover-icon"}))),!t||this.state.areFiltersActive?r.a.createElement("form",{className:"main-form",onSubmit:function(t){e.handleSubmit(t)},ref:this.formRef},r.a.createElement("div",{className:"exit-filters-icon",onClick:function(){return e.setState({areFiltersActive:!1})}},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement(R.a,{sm:"4",xs:1,lg:4},r.a.createElement(N.a,{xs:"12"},r.a.createElement(O,{value:this.state.q,onChange:function(a){e.setState({filters:Object(w.a)({},e.state.filters,{q:a.target.value})});var n=Object(w.a)({},e.state.filters,{q:a.target.value});!t&&e.props.handleSubmit(n)},className:"form-control input-error",name:"q",placeholder:"Tytu\u0142",isErrorConditionBlock:function(e){return!1},errorMsg:"Brak tytu\u0142u"})),r.a.createElement(N.a,{xs:"12"},r.a.createElement(O,{value:this.state.authors,onChange:function(a){e.setState({filters:Object(w.a)({},e.state.filters,{authors:a.target.value})});var n=Object(w.a)({},e.state.filters,{authors:a.target.value});!t&&e.props.handleSubmit(n)},className:"form-control input-error",name:"authors",placeholder:"Autorzy",isErrorConditionBlock:function(e){return!1}})),r.a.createElement(N.a,{xs:"12"},r.a.createElement("select",{className:"browser-default custom-select",name:"langRestrict",onChange:function(a){e.setState({filters:Object(w.a)({},e.state.filters,{langRestrict:a.target.value})});var n=Object(w.a)({},e.state.filters,{langRestrict:a.target.value});!t&&e.props.handleSubmit(n)},placeholder:"J\u0119zyk"},d.a.keys(E).map((function(e,t){return r.a.createElement("option",{value:E[e],key:t,label:e})})))),r.a.createElement(N.a,{xs:"12"},r.a.createElement("select",{className:"browser-default custom-select",name:"filter",onChange:function(a){e.setState({filters:Object(w.a)({},e.state.filters,{filter:a.target.value})});var n=Object(w.a)({},e.state.filters,{filter:a.target.value});!t&&e.props.handleSubmit(n)},placeholder:"J\u0119zyk"},r.a.createElement("option",{value:null,label:"Typ e-booka"}),r.a.createElement("option",{value:"free-ebooks",label:"Darmowe"}),r.a.createElement("option",{value:"paid-ebooks",label:"P\u0142atne"}),r.a.createElement("option",{value:"ebooks",label:"Darmowe i p\u0142atne"}))),r.a.createElement(N.a,{xs:"12",style:{display:a}},r.a.createElement("button",{disabled:this.state.filters.q+this.state.filters.authors==="",className:"btn btn-success",onClick:function(t){t.preventDefault(),e.handleSubmit(t),e.setState({areFiltersActive:!1})},type:"submit"},"Filtruj")))):null)}}]),a}(r.a.Component),S=a(20),x=a.n(S),C=function(e){var t=e.isVisible;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"loading-component-container"},r.a.createElement("div",null)):null)},F=function(e){var t=Object(n.useState)(1),a=Object(b.a)(t,2),i=a[0],l=a[1],s=Object(n.useState)({maxResults:10*i,q:"",langRestrict:""}),c=Object(b.a)(s,2),o=c[0],u=c[1],m=function(e,t){var a=Object(n.useState)([]),r=Object(b.a)(a,2),i=r[0],l=r[1],s=Object(n.useState)(!1),c=Object(b.a)(s,2),o=c[0],u=c[1],m=Object(n.useState)(!1),f=Object(b.a)(m,2),d=f[0],h=f[1],v=Object(n.useState)(!1),E=Object(b.a)(v,2),g=E[0],y=E[1];return Object(n.useEffect)((function(){l([]),y(!1)}),[e]),Object(n.useEffect)((function(){var a;if(u(!0),y(!1),""!==e.q)return x()({method:"GET",url:"https://www.googleapis.com/books/v1/volumes",params:{q:e.q,startIndex:10*t,langRestrict:e.langRestrict,maxResults:10},cancelToken:new S.CancelToken((function(e){return a=e}))}).then((function(e){if(u(!1),!e.data.items)return y(!0),void h(!1);l((function(t){return[].concat(Object(p.a)(t),Object(p.a)(e.data.items.map(k)))})),h(10===e.data.items.length)})).catch((function(e){x.a.isCancel(e)})),function(){return a()}}),[e,t]),{books:i,inProgress:o,hasMore:d,isError:g}}(o,i),f=m.books,d=m.inProgress,h=m.hasMore,v=m.isError,E=Object(n.useRef)(),g=Object(n.useCallback)((function(e){d||(E.current&&E.current.disconnect(),E.current=new IntersectionObserver((function(e){e[0].isIntersecting&&h&&l((function(e){return e+1}))})),e&&E.current.observe(e))}),[d,h]);return r.a.createElement("div",null,r.a.createElement(z,Object.assign({},e,{handleSubmit:function(e){var t=e.q+(""!==e.authors?"+inauthors:"+e.authors:"");u({q:t,langRestrict:e.langRestrict,maxResults:10}),l(0)}})),""!==o.q?r.a.createElement("div",{className:"list-container"},f?f.map((function(e,t){return f.length===t+1?r.a.createElement(j,Object.assign({key:t,Ref:g},e)):r.a.createElement(j,Object.assign({key:t},e))})):r.a.createElement("span",null,"Brak ksi\u0105ek do wy\u015bwietlenia")):r.a.createElement("div",{className:"empty-state-component-volumes-list"},r.a.createElement("p",null,"Wpisz tytu\u0142, aby wy\u015bwietli\u0107 pozycje")),v?r.a.createElement("div",{className:"empty-state-component-volumes-list"},r.a.createElement("p",null,"Przepraszamy, nie ma takiej ksi\u0105ki na naszej p\xf3\u0142ce")):null,r.a.createElement(C,{isVisible:d&&""!==o.q}),h||""===o.q||d||0===f.length?null:r.a.createElement("div",{className:"center-content"},r.a.createElement("p",null,"Brak kolejnych wynik\xf3w")))},P=function(e){return r.a.createElement(s.c,null,[{path:"/search",component:F,exact:!0},{path:"/",component:v,exact:!0}].map((function(e,t){return r.a.createElement(s.a,{key:t,path:e.path,component:e.component,exact:!0})})))};a(73);var q=function(){return r.a.createElement(P,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(22);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A.a,null,r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.75a28e3d.chunk.js.map